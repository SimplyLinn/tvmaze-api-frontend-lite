(function(e){function t(t){for(var n,o,i=t[0],u=t[1],c=t[2],p=0,h=[];p<i.length;p++)o=i[p],s[o]&&h.push(s[o][0]),s[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==s[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("96cf");var n=r("3b8d"),s=(r("cadf"),r("551c"),r("f751"),r("097d"),r("2b0e")),a=r("8c4f"),o=r("5f5b"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-container",[r("b-navbar",{attrs:{toggleable:"md"}},[r("b-navbar-brand",{attrs:{to:"/"}},[r("img",{staticStyle:{height:"100px"},attrs:{src:"/static/img/logo_transparent.png",alt:"Linn's TV Search"}})]),r("b-navbar-toggle",{attrs:{target:"mainNav"}},[r("img",{attrs:{src:"/static/img/hamburger_icon.svg"}})]),r("b-collapse",{attrs:{"is-nav":"",id:"mainNav"}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/about"}},[e._v("About Us")]),r("b-nav-item",{staticClass:"nav-github-link",attrs:{href:"https://github.com/SimplyLinn/tvmaze-api-frontend-lite"}},[r("img",{staticClass:"icon",attrs:{src:"/static/img/GitHub-Mark.png"}}),e._v(" Github")])],1)],1)],1),r("router-view")],1)],1)},u=[],c={name:"app"},l=c,p=r("2877"),h=Object(p["a"])(l,i,u,!1,null,null,null),d=h.exports,f=(r("9607"),r("8e6e"),r("ac6a"),r("456d"),r("bd86")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-form-input",{staticClass:"searchForm",attrs:{placeholder:"Search for series"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),r("router-view")],1)},b=[],v={name:"app",data:function(){return{searchTerm:""}},methods:{submit:function(){this.$router.push({name:"search",params:{query:this.searchTerm}})}},mounted:function(){this.searchTerm=this.$route.params.query||""}},g=v,w=Object(p["a"])(g,m,b,!1,null,null,null),y=w.exports,_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v("About us")]),r("p",[e._v('\n    Okay, so this is the boiled down "to specifications" version of the tv-maze api project. It does EXACTLY what\'s asked in the assignment,\n    nothing more, nothing less.\n  ')]),r("p",[e._v("\n    To see what happens when I step away from the exact specification to show off, "),r("a",{attrs:{href:"https://tvmaze.opposite.dev"}},[e._v('check out the "non-lite" version')]),r("br"),e._v("\n    - Linn\n  ")])])}],j={},k=Object(p["a"])(j,_,O,!1,null,null,null),E=k.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  404 not found. How did this happen?\n")])},S=[],P={},q=Object(p["a"])(P,x,S,!1,null,null,null),T=q.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  Search above and press enter to search.\n")])},R=[],C={},M=Object(p["a"])(C,$,R,!1,null,null,null),D=M.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.show?r("b-container",{staticStyle:{"margin-top":"1em"}},[r("b-row",[r("b-col",{attrs:{cols:"3",sm:"2"}},[r("https-img",{staticStyle:{width:"100%"},attrs:{src:e.show.image&&e.show.image.medium?e.show.image.medium:"/static/img/no-image-show-thumb.png"}})],1),r("b-col",{attrs:{cols:"9",sm:"10"}},[e.show.premiered?[r("b-badge",[e._v(e._s(e.show.premiered.substring(0,4)))]),e._v(" ")]:e._e(),e.show.type?[r("b-badge",[e._v(e._s(e.show.type))]),e._v(" ")]:e._e(),e.show.status?[r("b-badge",{attrs:{variant:e.statusVariant}},[e._v(e._s(e.show.status))]),e._v(" ")]:e._e(),r("h4",[e._v(e._s(e.show.name)+" "),e.show.genres?[e._l(e.show.genres,function(t){return[r("b-badge",{key:e.show.id+t},[e._v(e._s(t))]),e._v(" ")]})]:e._e()],2),r("br"),r("span",[e._v(e._s(e.summaryText))])],2)],1),r("hr"),e.seasons.length?r("div",[e._l(e.seasons,function(t,n){return[t?r("b-row",{key:e.show.id+"s"+n},[r("b-col",[r("h5",[e._v("Season "+e._s(n+1))])])],1):e._e(),t?r("div",{key:e.show.id+"s"+n+"list"},[r("b-list-group",e._l(t,function(t){return r("b-list-group-item",{key:e.show.id+"s"+n+"e"+t.number,attrs:{button:""},on:{click:function(r){return e.routeEpisode(t.season,t.number)}}},[r("https-img",{attrs:{src:t.image&&t.image.medium?t.image.medium:"/static/img/no-image-episode-thumb.png"}}),r("span",{staticStyle:{position:"absolute",top:".5em"}},[e._v("S"+e._s(e.pad(t.season))+"E"+e._s(e.pad(t.number)))]),r("b",[e._v(e._s(t.name))])],1)}),1)],1):e._e(),t&&n<e.seasons.length-1?r("hr",{key:e.show.id+"s"+n+"hr"}):e._e()]})],2):r("div",[e._v("\n    There are no episodes to show.\n  ")]),r("b-modal",{ref:"episode-modal",attrs:{size:"lg",visible:!!e.selectedEpisode,centered:""},on:{hidden:e.closeEpisode}},[e.selectedEpisode?[r("https-img",{staticClass:"float-left",attrs:{src:e.selectedEpisode.image&&e.selectedEpisode.image.medium?e.selectedEpisode.image.medium:"/static/img/no-image-episode-thumb.png"}}),e._v("\n      "+e._s(e.episodeText)+"\n    ")]:e._e(),e.selectedEpisode?r("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[e._v("\n      "+e._s(e.selectedEpisode.name)+" "),r("b-badge",[e._v("S"+e._s(e.pad(e.selectedEpisode.season))+"E"+e._s(e.pad(e.selectedEpisode.number)))])],1):e._e(),e.selectedEpisode?r("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e.selectedEpisode.airdate?r("p",{staticClass:"float-left"},[e._v("Aired: "+e._s(e.selectedEpisode.airdate))]):e._e(),r("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:e.hideModal}},[e._v("\n          Close\n      ")])],1):e._e()],2)],1):r("div",[e._v("\n  Did not find anything for the search "),r("b",[e._v(e._s(e.query))])])},W=[],z=(r("f576"),r("386d"),r("7618")),L=(r("7514"),r("4917"),r("768b")),U=(r("55dd"),r("a481"),r("75fc"),r("28a5"),r("5df3"),r("4f7f"),r("7f7f"),r("d225")),Q=r("308d"),V=r("6bb5"),F=r("4e2b"),G=r("f28b");Object(G["a"])(Error),Object(G["a"])(Error);function H(e){return new Promise(function(t){return setTimeout(t,e)})}function I(e){var t=""+e;return t=t.replace(/<br>/gi,"\n"),t=t.replace(/<br\s\/>/gi,"\n"),t=t.replace(/<br\/>/gi,"\n"),t=t.replace(/<p.*?>/gi,"\n"),t=t.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi," $2 ($1)"),t=t.replace(/<script.*>[\w\W]{1,}(.*?)[\w\W]{1,}<\/script>/gi,""),t=t.replace(/<style.*>[\w\W]{1,}(.*?)[\w\W]{1,}<\/style>/gi,""),t=t.replace(/<(?:.|\s)*?>/g,""),t=t.replace(/(?:(?:\r\n|\r|\n)\s*){2,}/gim,"\n\n"),t=t.replace(/ +(?= )/g,""),t=t.replace(/&nbsp;/gi," "),t=t.replace(/&amp;/gi,"&"),t=t.replace(/&quot;/gi,'"'),t=t.replace(/&lt;/gi,"<"),t=t.replace(/&gt;/gi,">"),t}var J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("img",{staticStyle:{"margin-right":"1em"},attrs:{src:e.saneSrc}})},N=[],X=(r("f559"),{name:"app",data:function(){return{}},props:{src:String},methods:{},computed:{saneSrc:function(){return this.src&&this.src.startsWith("http:")?"https"+this.src.substring(4):this.src}}}),Y=X,B=Object(p["a"])(Y,J,N,!1,null,null,null),K=B.exports,Z=r("b0b4"),ee=r("bc3a"),te=r.n(ee);function re(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var se=2e3,ae=te.a.create({baseURL:"https://api.tvmaze.com/",timeout:5e3}),oe=[],ie=!1,ue=function(){function e(){Object(U["a"])(this,e)}return Object(Z["a"])(e,[{key:"doRequest",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=0;case 1:return e.prev=1,e.next=4,ae.request(t);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e["catch"](1),e.t0.isAxiosError){e.next=11;break}throw e.t0;case 11:if(e.t0.response){e.next=13;break}throw e.t0;case 13:if(429===e.t0.response.status){e.next=15;break}throw e.t0;case 15:if(n=Math.min(10*se,Math.round(se*Math.pow(1.5,r))),r++,!(this.maxRetries&&r>=this.maxRetries)){e.next=19;break}throw e.t0;case 19:return console.log("We got ratelimited, waiting ".concat(n,"ms. We have tried ").concat(r," times.")),e.next=22,H(n);case 22:e.next=1;break;case 24:case"end":return e.stop()}},e,this,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"runQueue",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r,n,s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(ie=!0,oe.length){e.next=4;break}return ie=!1,e.abrupt("return");case 4:t=oe.pop(),r=t.config,n=t.resolve,s=t.reject,this.doRequest(r).then(n).catch(s).finally(function(){return a.runQueue()});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(e){var t=this,r=!1;return e.hasOwnProperty("priority")&&(r=e.priority,delete e.priority),new Promise(function(n,s){oe[r?"push":"unshift"]({config:e,resolve:n,reject:s}),ie||t.runQueue()})}},{key:"get",value:function(e,t){return this.request(ne({url:e,method:"get"},t||{}))}},{key:"delete",value:function(e,t){return this.request(ne({url:e,method:"delete"},t||{}))}},{key:"head",value:function(e,t){return this.request(ne({url:e,method:"head"},t||{}))}},{key:"options",value:function(e,t){return this.request(ne({url:e,method:"options"},t||{}))}},{key:"post",value:function(e,t,r){return this.request(ne({url:e,method:"post",data:t},r||{}))}},{key:"put",value:function(e,t,r){return this.request(ne({url:e,method:"put",data:t},r||{}))}},{key:"patch",value:function(e,t,r){return this.request(ne({url:e,method:"patch",data:t},r||{}))}},{key:"getUri",value:function(e){ae.getUri(e)}},{key:"search",value:function(e){return this.get("/singlesearch/shows",{params:{embed:"episodes",q:e}})}}]),e}(),ce=new ue,le={name:"app",data:function(){return{show:null}},components:{"https-img":K},props:{query:String,episode:String},computed:{summaryText:function(){var e=I(this.show.summary);return e},statusVariant:function(){switch(this.show.status.toLowerCase()){case"running":return"success";case"ended":return"danger";case"in development":return"warning";default:return null}},seasons:function(){if(!this.show._embedded||!this.show._embedded.episodes)return[];var e=[];return this.show._embedded.episodes.forEach(function(t){var r=t.season-1;Array.isArray(e[r])||(e[r]=[]),e[r].push(t)}),e.forEach(function(e){return e.sort(function(e,t){return e.number-t.number})}),e},selectedEpisode:function(){if(!this.episode)return null;try{var e=this.episode.match(/S(\d{2,})E(\d{2,})/),t=Object(L["a"])(e,3),r=t[1],n=t[2];return r--,n=+n,this.seasons[r].find(function(e){return e.number===n})}catch(s){return console.error(s),null}},episodeText:function(){if(!this.selectedEpisode)return"";var e=I(this.selectedEpisode.summary);return e}},methods:{searchShow:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching show: ".concat(t," (").concat(Object(z["a"])(t),")")),e.prev=1,e.next=4,ce.search(t);case 4:this.show=e.sent.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}(),pad:function(e,t,r){return t=t||2,r=r||"0",String(e).padStart(t,r)},routeEpisode:function(e,t){var r="S".concat(this.pad(e),"E").concat(this.pad(t));this.$router.push({name:"search",params:{query:this.query,episode:r}})},closeEpisode:function(){this.$router.push({name:"search",params:{query:this.query}})},hideModal:function(){this.$refs["episode-modal"].hide()}},watch:{query:function(e,t){t!==e&&this.searchShow(e)}},mounted:function(){this.searchShow(this.query)}},pe=le,he=Object(p["a"])(pe,A,W,!1,null,null,null),de=he.exports;function fe(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var be=[{path:"/about",component:E},{path:"/",component:y,children:[{name:"search",path:"/search/:query/:episode?",component:de,props:function(e){var t=me({},e.params);return t.id=+t.id,t}},{path:"/",component:D}]},{path:"*",component:T}],ve=new a["a"]({routes:be});s["default"].use(a["a"]),s["default"].use(o["a"]),s["default"].config.productionTip=!1,new s["default"]({router:ve,render:function(e){return e(d)},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}).$mount("#app")},9607:function(e,t,r){}});
//# sourceMappingURL=app.4ea8ed13.js.map